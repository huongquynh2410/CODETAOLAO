<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>‚≠ê Catch the Falling Star</title>
<style>
  body {
    margin:0; padding:0;
    display:flex; justify-content:center; align-items:center;
    height:100vh; background:#0f2027;
    background:linear-gradient(to right,#2c5364,#203a43,#0f2027);
    color:#fff; font-family:sans-serif; overflow:hidden;
  }
  canvas {
    background:rgba(255,255,255,0.08);
    border:2px solid #fff;
    border-radius:12px;
  }
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let basket={x:140,y:550,w:120,h:20,speed:10};
let stars=[];
let score=0;
let timeLeft=30;
let gameOver=false;
let starSpeedBase=2; // t·ªëc ƒë·ªô c∆° b·∫£n c·ªßa sao

// V·∫Ω gi·ªè
function drawBasket(){
  ctx.fillStyle="orange";
  ctx.fillRect(basket.x,basket.y,basket.w,basket.h);
}

// V·∫Ω sao
function drawStars(){
  ctx.fillStyle="yellow";
  for(let s of stars){
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
  }
}

// Update sao
function updateStars(){
  for(let i=stars.length-1;i>=0;i--){
    stars[i].y+=stars[i].speed;
    if(stars[i].y>canvas.height){
      stars.splice(i,1);
    }
    else if(
      stars[i].x>basket.x && stars[i].x<basket.x+basket.w &&
      stars[i].y+stars[i].r>basket.y
    ){
      stars.splice(i,1);
      score++;
    }
  }
}

// Sinh sao ng·∫´u nhi√™n
setInterval(()=>{
  if(!gameOver){
    stars.push({
      x:Math.random()*canvas.width,
      y:0,
      r:8,
      speed:starSpeedBase+Math.random()*2
    });
  }
},800);

// Countdown + tƒÉng ƒë·ªô kh√≥
setInterval(()=>{
  if(!gameOver){
    timeLeft--;
    if(timeLeft<=0) gameOver=true;
    if(timeLeft%5===0 && starSpeedBase<10){ 
      starSpeedBase+=0.5; // tƒÉng t·ªëc ƒë·ªô m·ªói 5 gi√¢y
    }
  }
},1000);

// ƒêi·ªÅu khi·ªÉn
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") basket.x-=basket.speed;
  if(e.key==="ArrowRight") basket.x+=basket.speed;
  basket.x=Math.max(0,Math.min(canvas.width-basket.w,basket.x));
});

// Loop
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(!gameOver){
    drawBasket();
    drawStars();
    updateStars();
    ctx.fillStyle="white";
    ctx.font="18px sans-serif";
    ctx.fillText("‚≠ê ƒêi·ªÉm: "+score,10,25);
    ctx.fillText("‚è≥ Th·ªùi gian: "+timeLeft+"s",250,25);
    requestAnimationFrame(loop);
  } else {
    ctx.fillStyle="white";
    ctx.font="28px sans-serif";
    ctx.fillText("üéÆ Game Over!",120,250);
    ctx.fillText("ƒêi·ªÉm cu·ªëi: "+score,130,300);
  }
}
loop();
</script>
</body>
</html>
